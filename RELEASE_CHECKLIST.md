## Kotoori リリース手順と QA シナリオ

このドキュメントは開発チームと非プログラマの関係者向けに、リリース前に確認すべき項目と手順、実行すべき QA シナリオを平易な言葉でまとめたものです。

---

**リリースの目的**: Windows x64 版の安定版（またはベータ版）を公開し、ユーザがインストーラまたはポータブル版で問題なく起動・基本操作ができることを確認する。

**対象**: 現在のコードベース（Monaco を使ったテキストエディタ、テーマ・履歴・ファイル入出力を含む）

---

**必須チェック（リリース前）**
- **メタ情報**: `package.json` の `description` / `author` / `license` / `repository` が正しいこと。
- **ビルド確認**: `npm run build` が成功し、`build-output`（または `build-output/*.exe`）が生成されること。
- **コード署名**: 可能なら署名済みビルドを用意（未署名だと SmartScreen の警告が出る）。
- **簡易ユーザガイド**: 最低限の操作説明（開く/保存/テーマ切替/履歴復元）を用意。
- **リリースノート**: 主要な新機能・既知の問題・既知の回避策を記載。

---

**パッケージ生成手順（技術者向け 1-2 行）**
- ルートで:

```powershell
npm run build
```

- 成功すると `build-output` 配下にインストーラ/portable が生成されます。

---

**インストール後のスモークテスト（必須、非プログラマでも実行可）**
各手順は「操作」「期待される結果」の順に記載します。

1. 操作: インストーラ（またはポータブル実行ファイル）を起動する。
   - 期待: アプリが起動し、メインウィンドウが表示される。

2. 操作: メニューから「ファイル」→「新しいテキスト」を選ぶ。
   - 期待: 新しい空ファイルが開き、テキスト入力が可能。

3. 操作: 文字を入力して `Ctrl+S` で保存する（名前を付けて保存で任意のフォルダに保存）。
   - 期待: ファイルが作成され、エクスプローラーで開ける。

4. 操作: 保存したファイルをアプリで開き、内容が正しいことを確認する。
   - 期待: 保存したテキストが正しく読み込まれる（日本語含む）。

5. 操作: `Settings`（設定）でテーマを切り替える（ダーク/ライト等）。
   - 期待: エディタと UI の色が切り替わる。

6. 操作: 履歴機能で「スナップショット」を確認し、以前のスナップショットを復元する。
   - 期待: 選択した履歴の内容が復元される。

7. 操作: Shift-JIS で保存された既存ファイルを開く（可能ならテストファイルを用意）。
   - 期待: 文字化けせず表示される。必要ならエンコーディング選択で正しく開ける。

8. 操作: 大きなファイル（例: 50MB のプレーンテキスト）を開く。
   - 期待: 極端な遅延やクラッシュがないこと（実行環境に依存）。

---

**詳細な QA シナリオ（チェックリスト形式、各30分〜1時間）**

- シナリオ A: ファイル入出力（基本）
  - 新規作成、保存、上書き保存、名前を付けて保存、開くを繰り返す。
  - 期待: 保存時にエンコーディングが指定どおり保存される。

- シナリオ B: 日本語エンコーディング耐性
  - UTF-8（BOMあり/なし）と Shift-JIS のサンプルファイルで読み込み/保存を確認。

- シナリオ C: 履歴と復元
  - 連続編集→スナップショット保存→複数スナップショット間で差分と復元を確認。

- シナリオ D: UI/ウィンドウ操作
  - メニューバーのドラッグで移動、ダブルクリックで最大化/復元、ウィンドウコントロールを確認。

- シナリオ E: テーマと表示
  - 各テーマに切替え、エディタのフォントサイズ・行間の設定が反映されるか確認。

- シナリオ F: 同期スクロール（プレビュー機能がある場合）
  - エディタの行に合わせてプレビューが自動スクロールするか確認。

---

**リリース前に技術チームが確認すべき項目（要対応）**
- 自動テスト: 主要ユニット（エンコーディング判定、履歴 CRUD）を少なくとも単体テスト化。
- CI: ビルドの自動化と静的チェック（ESLint/TypeScript）の導入。
- ロギング: 主要エラーを収集する仕組みの検討（任意だが推奨）。

---

**リスクと回避策**
- 未署名ビルド: SmartScreen 警告 → ユーザに警告文を添えて公開、署名取得を優先。
- 大量履歴/ディスク不足: スナップショット保存先の監視・古いスナップショット自動削除ルールを検討。

---

**リリースノート（テンプレート）**
- バージョン: x.y.z
- 日付: YYYY-MM-DD
- 追加: 主な新機能を箇条書き
- 修正: 重要なバグ修正（簡潔に）
- 既知の問題: ユーザが影響を受ける可能性のある項目と回避策

---

**ローンチ後の運用（短く）**
- 初期サポート期間（1週間）: 重要なバグ報告に即対応する体制を整える。優先度高のバグは緊急パッチを準備。
- フィードバック収集: GitHub Issues / フィードバックフォームを案内。

---

もしこのままファイルをコミットしてプルリクエスト用パッチを作成してよければ次に進めます：
- 1) 変更をコミットして PR 用ブランチを作る
- 2) CI ワークフロー（ビルド＋簡易テスト）を追加

---

作成者: リリース支援ツール
作成日: 2026-02-11
